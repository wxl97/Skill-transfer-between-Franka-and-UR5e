<?xml version="1.0" ?>
<launch>
  <!-- Mode argument to switch between use-case 1 and use-case 2 -->
  <arg name="mode" default="shaft1" />
  
  <arg name="robot_ip" default="192.168.3.102"/>
  <arg name="arm_id" default="panda" />
  <arg name="transmission" default="position" doc="The type of position control to use (either 'position' or 'effort')" />
  <arg name="use_tls" default="false" />

  <!-- Include the franka_control launch file -->
  <include file="$(find franka_control)/launch/franka_control.launch" pass_all_args="true">
    <arg name="load_gripper" value="true" />
  </include>

  <!-- 加载笛卡尔阻抗控制器配置 -->
  <rosparam command="load" 
            file="$(find franka_example_controllers)/config/franka_example_controllers.yaml" subst_value="true" />

  <!-- Controller spawner -->
  <node name="controller_spawner_1"
        pkg="controller_manager"
        type="spawner"
        respawn="false"
        output="screen"
        args="$(arg transmission)_joint_trajectory_controller">
  </node>

  <node name="controller_spawner_2"
        pkg="controller_manager"
        type="spawner"
        respawn="false"
        output="screen"
        args="--stopped cartesian_impedance_example_controller">
  </node>



  <!-- Include the panda_moveit_config demo launch file -->
  <include file="$(find panda_moveit_config)/launch/demo.launch" pass_all_args="true">
    <arg name="moveit_controller_manager" value="ros_control" />
    <arg name="use_rviz" value="false" />
    <arg name="pipeline" value="chomp" />
  </include>

  <!-- Panda control node with mode selection -->

  <!-- 启动 Rviz -->
  <!-- <node pkg="rviz" type="rviz" output="screen" name="rviz"
        args="-d $(find franka_example_controllers)/launch/rviz/franka_description_with_marker.rviz"/> -->
  
  <!-- 启动 rqt_reconfigure 用于动态调整参数 -->
  <!-- <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" required="false" /> -->
  

</launch>
